<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asteroides</title>
</head>
<body>
    <canvas id="myCanvas">Your browser does not support the HTML5 canvas tag. </canvas>
	<div class="aa">
		<h1>Asteroides</h1>
		<button id="btn">Play</button>
		<button id="btnclose">Quit</button>
	</div>
	<script>
		var canvas = document.getElementById('myCanvas')
        //set canvas in full page
        canvas.width  = window.innerWidth;
        canvas.height = window.innerHeight
		var ctx = canvas.getContext('2d');
		const W = canvas.width;
        const H = canvas.height;
		let img = new Image();
		img.src = 'https://i.ytimg.com/vi/y2_2Lcl5Iow/maxresdefault.jpg';
		ctx.drawImage(img, 0, 0,W,H);
        //load page
		class Asteroides {
            constructor(x, y, r, d, c) { // CONSTRUCTOR
                this.x = x; // initial X position
                this.y = y; // initial Y position
                if(r=="60"){
                     // (constant) horizontal displacement(velocity): d is a direction angle
                    this.dX = 2 * Math.cos(d);
                    // (constant) vertical displacement (velocity): d is a direction angle
                    this.dY = 2 * Math.sin(d);
                }
                else{
                     // (constant) horizontal displacement(velocity): d is a direction angle
                    this.dX = 5 * Math.cos(d);
                    // (constant) vertical displacement (velocity): d is a direction angle
                    this.dY = 5 * Math.sin(d);
                }
               
                this.c = c; // color
                this.R = r; // circle radius(constant)
            }

            draw() {
                ctx.strokeStyle = this.c;
                var numberOfSides = 8;
                var angle = 2 * Math.PI / numberOfSides;
                ctx.save()
                ctx.beginPath();
                ctx.translate(this.x, this.y);
                if(this.R=="60"){
                    ctx.rotate(angleS * Math.PI / 180)
                }
                else{
                    ctx.rotate(angleS*Math.PI/40)
                }
                
                ctx.moveTo(this.R, 0);
                for (var i = 1; i <= numberOfSides; i++) {
                    ctx.lineTo(this.R * Math.cos(i * angle), this.R * Math.sin(i * angle));
                }
                ctx.lineWidth = 3
                ctx.stroke()
                ctx.restore()
            }

            update() {
               // check Canvas vertical collisions
                if (this.x < -this.R)
                    this.x = W + this.R;

                if (this.x > W + this.R)
                    this.x = -this.R;

                // check Canvas horizontal collisions
                if (this.y < -this.R)
                    this.y = H + this.R;

                if (this.y > H + this.R)
                    this.y = -this.R;

                this.x += this.dX; // update horizontal position
                this.y += this.dY; // update vertical position
            }
        }
        let a = new Array();
        let list = [60, 30] // setup as many balls as wanted
        for (let i = 0; i < 25; i++) {
            let x = Math.floor(Math.random() * (1 - 0 + 1)) + 0;
            let radius = list[x]
            let color = `white`; // randomcolor
            // randomposition (inside Canvas)
            let xInit = 20 + Math.random() * (W - 2 * 20);
            let yInit = 20 + Math.random() * (H - 2 * 20);
            // randomdirection
            let direction = Math.random() * 2 * Math.PI;
            a.push(new Asteroides(xInit, yInit, radius, direction, color))
        }
        let angleS=0

        function render() {
            // fade Canvas
			ctx.fillStyle="transparent"
            ctx.drawImage(img, 0, 0,W,H);
            ctx.fillRect(0, 0, W, H);
            // draw & update
            a.forEach(asteroide => {
                asteroide.draw();
                asteroide.update();
            });
            angleS++;
            //new frame
            window.requestAnimationFrame(render);
        }
        render(); //startthe animation
		let btn=document.querySelector("#btn")
		btn.addEventListener("click",function(){
			alert('OK')
		}) 
        let btnClose=document.querySelector("#btnclose")
        btnClose.addEventListener("click",function(){
            window.close()
        }) 
	</script>
    <style>
        canvas{
            position: fixed;
            top:0px;
            left: 0px;
        }
		body{
			width:98vw;
			height: 96vh;
			display: flex;
			justify-content: center;
			align-items: center;
			user-select: none;
		}
		.aa{
			z-index: 1;
			position: relative;
			color:white;
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			background-color: rgba(255, 255, 255, 0.116);
			padding: 2%;
			border-radius: 2%;
			width:25vw
		}
		.aa, h1,button{
			margin:6%
		}
		.aa h1{
			font-family: "Bauhaus 93";
			font-size: 50px;
		}
		.aa button{
			background-color: white;
			font-weight: bold;
			border:none;
			width: 50%;
			height: 5vh;
			border-radius: 2%;
			font-size: 20px;
		}
    </style>
</body>
</html>